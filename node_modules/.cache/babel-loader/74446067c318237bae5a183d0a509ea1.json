{"ast":null,"code":"import _regeneratorRuntime from\"/Users/sungjaejoo/Desktop/InterLogger Version2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/sungjaejoo/Desktop/InterLogger Version2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import{Divider}from\"@mui/material\";import{TextField}from\"@mui/material\";import{Grid}from\"@mui/material\";import{Typography}from\"@mui/material\";import React,{useRef}from\"react\";import{logIn}from\"../../Service/ApiService\";import{useNavigate}from\"react-router-dom\";import{usersActions}from\"../../store/userSlice\";import{useSelector,useDispatch}from\"react-redux\";var UpdateProfileForm=function UpdateProfileForm(props){var userRef=useRef(\"\");var navigate=useNavigate();var reduxidToken=useSelector(function(state){return state.idToken;});var formHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var data,_data$error,errorMessage,json;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:console.log(userRef.current.value);_context.prev=1;_context.next=4;return fetch(\"https://identitytoolkit.googleapis.com/v1/accounts:update?key=AIzaSyCkLePHqkPxNxPalsSLE_C4CbAaOiaGwNw\",{method:\"POST\",body:JSON.stringify({idToken:reduxidToken,displayName:userRef.current.value,photoUrl:null,returnSecureToken:false}),headers:{\"Content-Type\":\"application/json\"}});case 4:data=_context.sent;if(data.ok){_context.next=10;break;}console.log(data);errorMessage=\"Failed to change user name. \\n 사용자 이름 변경에 실패하였습니다.\";if(data===null||data===void 0?void 0:(_data$error=data.error)===null||_data$error===void 0?void 0:_data$error.message){//equal with if(data && data.error && data.error.message)\nerrorMessage=data.error.message;}throw new Error(errorMessage);case 10:_context.next=12;return data.json();case 12:json=_context.sent;console.log(json);alert(\"성공하였습니다.\");_context.next=20;break;case 17:_context.prev=17;_context.t0=_context[\"catch\"](1);alert(_context.t0);case 20:case\"end\":return _context.stop();}}},_callee,null,[[1,17]]);}));return function formHandler(){return _ref.apply(this,arguments);};}();console.log(reduxidToken);return/*#__PURE__*/React.createElement(\"section\",null,/*#__PURE__*/React.createElement(Typography,{variant:\"h6\",color:\"white\"},\"Input the username that you want to change.\"),/*#__PURE__*/React.createElement(Typography,{variant:\"h6\",color:\"white\"},\"\\uBCC0\\uACBD\\uD560 \\uC0AC\\uC6A9\\uC790 \\uC774\\uB984\\uC744 \\uC785\\uB825\\uD574 \\uC8FC\\uC138\\uC694.\"),/*#__PURE__*/React.createElement(Divider,{sx:{backgroundColor:\"white\",marginTop:\"10px\"}}),/*#__PURE__*/React.createElement(Grid,{container:true,spacing:4,style:{marginTop:\"10px\"}},/*#__PURE__*/React.createElement(Grid,{item:true,xs:12,sm:3}),/*#__PURE__*/React.createElement(Grid,{item:true,xs:12,sm:6},/*#__PURE__*/React.createElement(TextField,{margin:\"dense\",required:true,name:\"Username\",sx:{input:{borderRadius:\"5px\",border:\"1px solid white\",color:\"white\"}},label:\"Username\",type:\"Username\",fullWidth:true,inputRef:userRef}),/*#__PURE__*/React.createElement(\"button\",{style:{marginTop:\"30px\"},onClick:formHandler},\"Submit\"))));};export default UpdateProfileForm;","map":{"version":3,"sources":["/Users/sungjaejoo/Desktop/InterLogger Version2/src/components/UpdateProfileForm/UpdateProfileForm.js"],"names":["Divider","TextField","Grid","Typography","React","useRef","logIn","useNavigate","usersActions","useSelector","useDispatch","UpdateProfileForm","props","userRef","navigate","reduxidToken","state","idToken","formHandler","console","log","current","value","fetch","method","body","JSON","stringify","displayName","photoUrl","returnSecureToken","headers","data","ok","errorMessage","error","message","Error","json","alert","backgroundColor","marginTop","input","borderRadius","border","color"],"mappings":"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","sourcesContent":["import { Divider } from \"@mui/material\";\nimport { TextField } from \"@mui/material\";\nimport { Grid } from \"@mui/material\";\nimport { Typography } from \"@mui/material\";\nimport React, { useRef } from \"react\";\nimport { logIn } from \"../../Service/ApiService\";\nimport { useNavigate } from \"react-router-dom\";\nimport { usersActions } from \"../../store/userSlice\";\nimport { useSelector, useDispatch } from \"react-redux\";\n\nconst UpdateProfileForm = (props) => {\n  const userRef = useRef(\"\");\n  let navigate = useNavigate();\n  const reduxidToken = useSelector((state) => state.idToken);\n\n  const formHandler = async () => {\n    console.log(userRef.current.value);\n    try {\n      const data = await fetch(\n        \"https://identitytoolkit.googleapis.com/v1/accounts:update?key=AIzaSyCkLePHqkPxNxPalsSLE_C4CbAaOiaGwNw\",\n        {\n          method: \"POST\",\n          body: JSON.stringify({\n            idToken: reduxidToken,\n            displayName: userRef.current.value,\n            photoUrl: null,\n            returnSecureToken: false,\n          }),\n          headers: {\n            \"Content-Type\": \"application/json\",\n          },\n        }\n      );\n      if (!data.ok) {\n        console.log(data);\n        let errorMessage =\n          \"Failed to change user name. \\n 사용자 이름 변경에 실패하였습니다.\";\n        if (data?.error?.message) {\n          //equal with if(data && data.error && data.error.message)\n          errorMessage = data.error.message;\n        }\n        throw new Error(errorMessage);\n      }\n      const json = await data.json();\n      console.log(json);\n      alert(\"성공하였습니다.\");\n    } catch (err) {\n      alert(err);\n    }\n  };\n\n  console.log(reduxidToken);\n  return (\n    <section>\n      <Typography variant=\"h6\" color=\"white\">\n        Input the username that you want to change.\n      </Typography>\n      <Typography variant=\"h6\" color=\"white\">\n        변경할 사용자 이름을 입력해 주세요.\n      </Typography>\n      <Divider sx={{ backgroundColor: \"white\", marginTop: \"10px\" }} />\n      <Grid container spacing={4} style={{ marginTop: \"10px\" }}>\n        <Grid item xs={12} sm={3}>\n          {}\n        </Grid>\n        <Grid item xs={12} sm={6}>\n          <TextField\n            margin=\"dense\"\n            required\n            name=\"Username\"\n            sx={{\n              input: {\n                borderRadius: \"5px\",\n                border: \"1px solid white\",\n                color: \"white\",\n              },\n            }}\n            label=\"Username\"\n            type=\"Username\"\n            fullWidth\n            inputRef={userRef}\n          />\n          <button style={{ marginTop: \"30px\" }} onClick={formHandler}>\n            Submit\n          </button>\n        </Grid>\n      </Grid>\n    </section>\n  );\n};\n\nexport default UpdateProfileForm;\n"]},"metadata":{},"sourceType":"module"}