{"ast":null,"code":"import _regeneratorRuntime from\"/Users/sungjaejoo/Desktop/InterLogger Version2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/sungjaejoo/Desktop/InterLogger Version2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/sungjaejoo/Desktop/InterLogger Version2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,useCallback}from\"react\";import AddNoteKr from\"./AddNoteKr\";import{useSelector,useDispatch}from\"react-redux\";import{useNavigate}from\"react-router-dom\";import{usersActions}from\"../../store/userSlice\";import NoteListKr from\"./NoteListKr\";var MessageLogFormKr=function MessageLogFormKr(){var reduxUser=useSelector(function(state){return state.user;});var dispatch=useDispatch();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),note=_useState2[0],setNote=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isLoading=_useState6[0],setIsLoading=_useState6[1];var navigate=useNavigate();var logoutHandler=function logoutHandler(){dispatch(usersActions.updateIdToken(null));dispatch(usersActions.updateIsLoggedIn(false));dispatch(usersActions.updateUser(null));localStorage.removeItem(\"token\");localStorage.removeItem(\"isLoggedIn\");localStorage.removeItem(\"user\");navigate(\"/login\");};var fetchNoteHandlerKr=useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,data,loadedNotes,key;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setIsLoading(true);setError(null);_context.prev=2;_context.next=5;return fetch(\"https://react-http-2887f-default-rtdb.firebaseio.com/notes2.json\");case 5:response=_context.sent;if(response.ok){_context.next=8;break;}throw new Error(\"Something went wrong!\");case 8:_context.next=10;return response.json();case 10:data=_context.sent;loadedNotes=[];for(key in data){loadedNotes.push({id:key,title:data[key].title,text:data[key].text,date:\"\".concat(data[key].logger,\"\\uB2D8\\uC774 \").concat(data[key].date,\"\\uC5D0 \\uB0A8\\uAE30\\uC168\\uC2B5\\uB2C8\\uB2E4..\")});}loadedNotes.reverse();console.log(loadedNotes);setNote(loadedNotes);_context.next=21;break;case 18:_context.prev=18;_context.t0=_context[\"catch\"](2);setError(_context.t0.message);case 21:setIsLoading(false);case 22:case\"end\":return _context.stop();}}},_callee,null,[[2,18]]);})),[]);function addNoteHandlerKr(_x){return _addNoteHandlerKr.apply(this,arguments);}function _addNoteHandlerKr(){_addNoteHandlerKr=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(note){var response,data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return fetch(\"https://react-http-2887f-default-rtdb.firebaseio.com/notes2.json\",{method:\"POST\",body:JSON.stringify(note),headers:{\"Content-Type\":\"appication/json\"}});case 2:response=_context2.sent;_context2.next=5;return response.json();case 5:data=_context2.sent;console.log(data);alert(\"\\uBA54\\uC138\\uC9C0\\uAC00 \\uC131\\uACF5\\uC801\\uC73C\\uB85C \\uCD94\\uAC00\\uB418\\uC5C8\\uC2B5\\uB2C8\\uB2E4.\");fetchNoteHandlerKr();case 9:case\"end\":return _context2.stop();}}},_callee2);}));return _addNoteHandlerKr.apply(this,arguments);}useEffect(function(){fetchNoteHandlerKr();},[fetchNoteHandlerKr]);var content=/*#__PURE__*/React.createElement(\"p\",{style:{color:\"white\"}},\"Found no Notes.\");if(note.length>0){content=/*#__PURE__*/React.createElement(NoteListKr,{note:note});}if(error){content=/*#__PURE__*/React.createElement(\"p\",{style:{color:\"white\"}},error);}if(isLoading){content=/*#__PURE__*/React.createElement(\"p\",{style:{color:\"white\"}},\"Loading...\");}return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"section\",null,/*#__PURE__*/React.createElement(\"h3\",{style:{color:\"white\"}},\"\\uBC18\\uAC11\\uC2B5\\uB2C8\\uB2E4.. \",reduxUser,\"\\uB2D8.... \"),/*#__PURE__*/React.createElement(\"button\",{onClick:logoutHandler},\" Logout\")),/*#__PURE__*/React.createElement(\"section\",null,/*#__PURE__*/React.createElement(\"h3\",{style:{color:\"white\"}},\"\\uBA54\\uC138\\uC9C0 \\uC591\\uC2DD\"),/*#__PURE__*/React.createElement(AddNoteKr,{AddNote:addNoteHandlerKr,logger:reduxUser})),/*#__PURE__*/React.createElement(\"section\",null,/*#__PURE__*/React.createElement(\"button\",{onClick:fetchNoteHandlerKr},\"\\uBA54\\uC138\\uC9C0 \\uC5C5\\uB370\\uC774\\uD2B8\")),/*#__PURE__*/React.createElement(\"section\",null,/*#__PURE__*/React.createElement(\"h3\",{style:{color:\"white\"}},\"\\uBA54\\uC138\\uC9C0 \\uB85C\\uADF8\"),content));};export default MessageLogFormKr;","map":{"version":3,"sources":["/Users/sungjaejoo/Desktop/InterLogger Version2/src/components/MessageLogForm/MessageLogFormKr.js"],"names":["React","useState","useEffect","useCallback","AddNoteKr","useSelector","useDispatch","useNavigate","usersActions","NoteListKr","MessageLogFormKr","reduxUser","state","user","dispatch","note","setNote","error","setError","isLoading","setIsLoading","navigate","logoutHandler","updateIdToken","updateIsLoggedIn","updateUser","localStorage","removeItem","fetchNoteHandlerKr","fetch","response","ok","Error","json","data","loadedNotes","key","push","id","title","text","date","logger","reverse","console","log","message","addNoteHandlerKr","method","body","JSON","stringify","headers","alert","content","color","length"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useCallback } from \"react\";\nimport AddNoteKr from \"./AddNoteKr\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { useNavigate } from \"react-router-dom\";\nimport { usersActions } from \"../../store/userSlice\";\nimport NoteListKr from \"./NoteListKr\";\nconst MessageLogFormKr = () => {\n  const reduxUser = useSelector((state) => state.user);\n  const dispatch = useDispatch();\n  const [note, setNote] = useState([]);\n  const [error, setError] = useState(null);\n  const [isLoading, setIsLoading] = useState(false);\n  let navigate = useNavigate();\n\n  const logoutHandler = () => {\n    dispatch(usersActions.updateIdToken(null));\n    dispatch(usersActions.updateIsLoggedIn(false));\n    dispatch(usersActions.updateUser(null));\n    localStorage.removeItem(\"token\");\n    localStorage.removeItem(\"isLoggedIn\");\n    localStorage.removeItem(\"user\");\n    navigate(\"/login\");\n  };\n\n  const fetchNoteHandlerKr = useCallback(async () => {\n    setIsLoading(true);\n    setError(null);\n    try {\n      const response = await fetch(\n        \"https://react-http-2887f-default-rtdb.firebaseio.com/notes2.json\"\n      );\n      if (!response.ok) {\n        throw new Error(\"Something went wrong!\");\n      }\n\n      const data = await response.json();\n      const loadedNotes = [];\n      for (const key in data) {\n        loadedNotes.push({\n          id: key,\n          title: data[key].title,\n          text: data[key].text,\n          date: `${data[key].logger}님이 ${data[key].date}에 남기셨습니다..`,\n        });\n      }\n      loadedNotes.reverse();\n      console.log(loadedNotes);\n      setNote(loadedNotes);\n    } catch (error) {\n      setError(error.message);\n    }\n    setIsLoading(false);\n  }, []);\n\n  async function addNoteHandlerKr(note) {\n    const response = await fetch(\n      \"https://react-http-2887f-default-rtdb.firebaseio.com/notes2.json\",\n      {\n        method: \"POST\",\n        body: JSON.stringify(note),\n        headers: {\n          \"Content-Type\": \"appication/json\",\n        },\n      }\n    );\n    const data = await response.json();\n    console.log(data);\n    alert(`메세지가 성공적으로 추가되었습니다.`);\n    fetchNoteHandlerKr();\n  }\n\n  useEffect(() => {\n    fetchNoteHandlerKr();\n  }, [fetchNoteHandlerKr]);\n\n  let content = <p style={{ color: \"white\" }}>Found no Notes.</p>;\n\n  if (note.length > 0) {\n    content = <NoteListKr note={note} />;\n  }\n\n  if (error) {\n    content = <p style={{ color: \"white\" }}>{error}</p>;\n  }\n\n  if (isLoading) {\n    content = <p style={{ color: \"white\" }}>Loading...</p>;\n  }\n\n  return (\n    <div>\n      <section>\n        <h3 style={{ color: \"white\" }}>반갑습니다.. {reduxUser}님.... </h3>\n        <button onClick={logoutHandler}> Logout</button>\n      </section>\n      <section>\n        <h3 style={{ color: \"white\" }}>메세지 양식</h3>\n        <AddNoteKr AddNote={addNoteHandlerKr} logger={reduxUser}></AddNoteKr>\n      </section>\n      <section>\n        <button onClick={fetchNoteHandlerKr}>메세지 업데이트</button>\n      </section>\n      <section>\n        <h3 style={{ color: \"white\" }}>메세지 로그</h3>\n        {content}\n      </section>\n    </div>\n  );\n};\n\nexport default MessageLogFormKr;\n"]},"metadata":{},"sourceType":"module"}